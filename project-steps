pulled the source code from github
git clone https://github.com/atefhares/DevOps-Challenge-Demo-Code

created a Dockerfile into the same dir (DevOps-Challenge-Demo-Code)

add the following code in it :

FROM python:3
#ADD hello.py /
COPY . .
RUN pip install install -r requirements.txt
EXPOSE 8000
CMD [ "python", "./hello.py" ]

then
docker build -t ahmed-image .

docker run ahmed-image

update tornado==5.1.1 in requirements.txt to tornado==6.1.0 because the older version was not working


to push the image to GCR
docker build -t gcr.io/ahmed-emad-project/ahmed-image .
gcloud auth configure-docker
docker push gcr.io/ahmed-emad-project/ahmed-image


to pull redis image
docker pull redis

By default, if an image is not tagged with the registry url it will not be pushed,
docker pulls/pushes the image from dockerhub.
for pushing an image to GCR, you need to tag it with the GCR repository url.

docker tag redis gcr.io/ahmed-emad-project/ahmed-redis-image

and now you can push it via
docker push  gcr.io/ahmed-emad-project/ahmed-redis-image

then created the infrastructure as showen in "terraform" folder

after that four yml files for deployment have been created and they are
1 python-deployment.yml for application deployment
2 redis-deployemnt.yml for redis database deployment
3 cluster-ip-service.yml to establish an internal connection between the app and database
4 load-balancer.yml to make my app publicly available

to configure your cluster on kubectl
gcloud container clusters get-credentials final-gke-cluster --region europe-west3 --project ahmed-emad-project
















